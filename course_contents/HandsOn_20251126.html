
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Docker Hands-on training (26-11-2025) &#8212; Data Club Feb 2025: Docker Introduction  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'course_contents/HandsOn_20251126';</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Shell script used to align and count reads" href="align_and_count_shell_script.html" />
    <link rel="prev" title="Docker Hands-on training" href="HandsOn.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
  
    <p class="title logo__title">Data Club Feb 2025: Docker Introduction  documentation</p>
  
</a></div>
        <div class="sidebar-primary-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/biosustain/dsp_docker_training" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../about.html">About</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Course Information</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../course_information/Instructions.html">Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../course_information/Location.html">Location</a></li>
<li class="toctree-l1"><a class="reference internal" href="../course_information/Timing.html">Agenda</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Course contents</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="DockerIntro.html">Docker Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="HandsOn.html">Docker Hands-on training</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Docker Hands-on training (26-11-2025)</a></li>
<li class="toctree-l1"><a class="reference internal" href="align_and_count_shell_script.html">Shell script used to align and count reads</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">data</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../data/README.html">Files description</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../resources.html">Resources</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">


<a href="https://github.com/biosustain/dsp_docker_training" target="_blank"
   class="btn btn-sm btn-source-repository-button"
   title="Source repository"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/course_contents/HandsOn_20251126.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Docker Hands-on training (26-11-2025)</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#initial-considerations">Initial considerations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-biological-context-and-script-to-run-in-a-docker-container">Data, biological context and script to run in a Docker container</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#running-a-container">Running a container</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pulling-a-container">Pulling a container</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#writing-our-dockerfile">Writing our Dockerfile</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#building-an-image-from-ther-dockerfile">Building an image from ther Dockerfile</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#running-a-container-in-interactive-mode">Running a container in interactive mode</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#file-system-mounts">File system mounts</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#running-the-container-mounting-the-data">Running the container mounting the data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#results-files-and-interpretion">Results files and interpretion</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="docker-hands-on-training-26-11-2025">
<h1>Docker Hands-on training (26-11-2025)<a class="headerlink" href="#docker-hands-on-training-26-11-2025" title="Link to this heading">#</a></h1>
<section id="initial-considerations">
<h2>Initial considerations<a class="headerlink" href="#initial-considerations" title="Link to this heading">#</a></h2>
<p>In this course, you can work on your laptop if you have installed the Docker in your machine. For local installation:</p>
<ul class="simple">
<li><p>Mac: <a class="reference external" href="https://docs.docker.com/desktop/setup/install/mac-install/" rel="noreferrer" target="_blank">https://docs.docker.com/desktop/setup/install/mac-install/</a></p></li>
<li><p>Linux: <a class="reference external" href="https://docs.docker.com/engine/install/" rel="noreferrer" target="_blank">https://docs.docker.com/engine/install/</a></p></li>
<li><p>Windows: <a class="reference external" href="https://docs.docker.com/desktop/setup/install/windows-install/" rel="noreferrer" target="_blank">https://docs.docker.com/desktop/setup/install/windows-install/</a></p></li>
</ul>
<p>Clone the repository that contain the data, script and all the course information</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">git</span><span class="nd">@github</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="n">biosustain</span><span class="o">/</span><span class="n">dsp_docker_training</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<p>Alternatively use Github Codespaces to avoid any system incompatibility. You can open directly a GitHub codespace for this specific repository here: <a class="reference external" href="https://codespaces.new/biosustain/dsp_docker_training" rel="noreferrer" target="_blank"><img alt="Open in GitHub Codespaces" src="https://github.com/codespaces/badge.svg" /></a></p>
</section>
<section id="data-biological-context-and-script-to-run-in-a-docker-container">
<h2>Data, biological context and script to run in a Docker container<a class="headerlink" href="#data-biological-context-and-script-to-run-in-a-docker-container" title="Link to this heading">#</a></h2>
<p>Biological context for this hands-on in these <a class="reference download internal" download="" href="../_downloads/e3412e734c868cf89b31016010b14a86/Biological_context_for_HandsOn_20251126.pdf"><span class="xref download myst">slides</span></a></p>
<p><a class="reference internal" href="align_and_count_shell_script.html"><span class="std std-doc">Shell script</span></a> that we want to run inside a container.</p>
</section>
<section id="running-a-container">
<h2>Running a container<a class="headerlink" href="#running-a-container" title="Link to this heading">#</a></h2>
<p>First of all, if you installed Docker Desktop on your machine check that Docker Desktop is open and shows “Running” in the status bar.</p>
<p>You can also test with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="o">-</span><span class="n">v</span>
<span class="n">docker</span> <span class="n">info</span>
</pre></div>
</div>
<p>Once the docker daemon is running you can create and run a new container from an image, we will start with the <code class="docutils literal notranslate"><span class="pre">hello-world</span></code> image, which is hosted on <a class="reference external" href="https://hub.docker.com/" rel="noreferrer" target="_blank">Docker Hub</a>.</p>
<blockquote>
<div><p>Docker Hub is Docker’s public registry service where we can &gt;store, share, and manage container images. It hosts Docker &gt;Official Images (like hello-world), Verified Publisher content, &gt;and community-contributed images.</p>
</div></blockquote>
<p>In your command line, run the publicly available <code class="docutils literal notranslate"><span class="pre">hello-world</span></code> image:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">run</span> <span class="n">hello</span><span class="o">-</span><span class="n">world</span>
</pre></div>
</div>
<p>We usually run that to check that our installation is working correctly. If you read <code class="docutils literal notranslate"><span class="pre">'Hello</span> <span class="pre">from</span> <span class="pre">Docker!'</span></code> everything is fine for now.</p>
<p>Please read the information given. Docker first tried to check if we had the container locally, as we did not, the online container repositories were checked. As the container was found, it was donwloaded, and run.</p>
</section>
<section id="pulling-a-container">
<h2>Pulling a container<a class="headerlink" href="#pulling-a-container" title="Link to this heading">#</a></h2>
<p>Pull the publicly available debian image: <code class="docutils literal notranslate"><span class="pre">debian:bookworm-slim</span></code> and verify it has been downloaded. Images are pulled by default from <a class="reference external" href="https://hub.docker.com/" rel="noreferrer" target="_blank">Docker hub</a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">pull</span> <span class="n">debian</span><span class="p">:</span><span class="n">bookworm</span><span class="o">-</span><span class="n">slim</span>
</pre></div>
</div>
<p>In Docker image names like <code class="docutils literal notranslate"><span class="pre">debian:bookworm-slim</span></code>, the colon separates the image name from its tag.</p>
<blockquote>
<div><p>“Bookworm” is the codename for Debian 12, the current stable release of the Debian Linux distribution.
“slim” variant is a stripped-down, minimal version of the base image.</p>
</div></blockquote>
<p>To check which images you have pulled, you can use <code class="docutils literal notranslate"><span class="pre">images</span></code> command with the following syntax:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">images</span>
</pre></div>
</div>
</section>
<section id="writing-our-dockerfile">
<h2>Writing our Dockerfile<a class="headerlink" href="#writing-our-dockerfile" title="Link to this heading">#</a></h2>
<p>Docker images are created from a textfile called <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code>.</p>
<p>This text file contains list of commands to assemble and configure the image with the software required.</p>
<p>For our dockerfile, we will learn the following instructions: <code class="docutils literal notranslate"><span class="pre">FROM</span></code>, <code class="docutils literal notranslate"><span class="pre">LABEL</span></code>, <code class="docutils literal notranslate"><span class="pre">WORKDIR</span></code>, <code class="docutils literal notranslate"><span class="pre">RUN</span></code>, <code class="docutils literal notranslate"><span class="pre">COPY</span></code> and <code class="docutils literal notranslate"><span class="pre">ENV</span></code>
Go to <a class="reference external" href="https://docs.docker.com/reference/dockerfile/" rel="noreferrer" target="_blank">Dockerfile references</a> and find out what are these instructions for.</p>
<p>First thing we need is a base image. A dockerfile can use an existing image, and build on top of it. A base image is an image you designate with <code class="docutils literal notranslate"><span class="pre">FROM</span></code> directive in a Dockerfile. A Dockerfile with the <code class="docutils literal notranslate"><span class="pre">FROM</span> <span class="pre">scratch</span></code> directive uses an empty base image. When we build the Docker image from <code class="docutils literal notranslate"><span class="pre">debian:13</span></code> we will get an image with something really close to having installed debian distribution (version 13).</p>
<p>What do we need to add to our Dockerfile?</p>
<ul class="simple">
<li><p>Base image</p></li>
<li><p>Working directory</p></li>
<li><p>Instructions to download and install software and place it on the executables path</p>
<ul>
<li><p>curl to download feature counts</p></li>
<li><p>bowtie2: align reads to a reference</p></li>
<li><p>feature counts: count reads</p></li>
<li><p>samtools: deal with .bam files (sorting and indexing them)</p></li>
</ul>
</li>
<li><p>copy an script example</p></li>
</ul>
<p>Open a file called Dockerfile. <code class="docutils literal notranslate"><span class="pre">code</span> <span class="pre">Dockerfile</span></code></p>
<p>First let’s specify which base image we want to use. We are going to use one of the latest Debian versions as base image:</p>
<div class="highlight-docker notranslate"><div class="highlight"><pre><span></span><span class="k">FROM</span><span class="w"> </span><span class="s">debian:13</span>
</pre></div>
</div>
<p>Define the working directory:</p>
<div class="highlight-docker notranslate"><div class="highlight"><pre><span></span><span class="k">WORKDIR</span><span class="w"> </span><span class="s">/app</span>
</pre></div>
</div>
<p>Next, we are going to update the downloader manager <code class="docutils literal notranslate"><span class="pre">apt-get</span></code> (included in the debian image) and installing the software that we need and can be found in apt-get (easier solution). In our case we need curl (downloading feature counts), bowtie2 (the aligner) and samtools (sort and index bam files).
We need to use <code class="docutils literal notranslate"><span class="pre">RUN</span></code> to execute building commands.</p>
<div class="highlight-docker notranslate"><div class="highlight"><pre><span></span><span class="k">RUN</span><span class="w"> </span>apt-get<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>apt-get<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>bowtie2<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>curl<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>samtools
</pre></div>
</div>
<p>However, not all tools needed can be installed with <code class="docutils literal notranslate"><span class="pre">apt-get</span></code>, for example in our case we need to download feature counts from a particular URL. This process is a bit more involved. We need to:</p>
<ul class="simple">
<li><p>download feature counts using curl</p></li>
<li><p>uncompress the package</p></li>
<li><p>remove the compress file</p></li>
<li><p>specify in which path there is the executable</p></li>
</ul>
<div class="highlight-docker notranslate"><div class="highlight"><pre><span></span><span class="c"># Download feature counts (package called subread)</span>
<span class="k">RUN</span><span class="w"> </span>curl<span class="w"> </span>-L<span class="w"> </span>-o<span class="w"> </span>subread-2.0.8-Linux-x86_64.tar.gz<span class="w"> </span>https://sourceforge.net/projects/subread/files/subread-2.0.8/subread-2.0.8-Linux-x86_64.tar.gz/download

<span class="c"># Uncompress and remove the compress file</span>
<span class="k">RUN</span><span class="w"> </span>tar<span class="w"> </span>-xzf<span class="w"> </span>subread-2.0.8-Linux-x86_64.tar.gz<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>rm<span class="w"> </span>subread-2.0.8-Linux-x86_64.tar.gz
</pre></div>
</div>
<p>Specify the path to the feature counts executable</p>
<div class="highlight-docker notranslate"><div class="highlight"><pre><span></span><span class="c"># Specify the path to the executable</span>
<span class="k">ENV</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">PATH</span><span class="si">}</span><span class="s2">:/app/subread-2.0.8-Linux-x86_64/bin/&quot;</span>
</pre></div>
</div>
<p>Finally we are going to copy to the image the scripts folder that contains the script that we are going to run.</p>
<div class="highlight-docker notranslate"><div class="highlight"><pre><span></span><span class="k">COPY</span><span class="w"> </span>scripts/<span class="w"> </span>./scripts/
</pre></div>
</div>
</section>
<section id="building-an-image-from-ther-dockerfile">
<h2>Building an image from ther Dockerfile<a class="headerlink" href="#building-an-image-from-ther-dockerfile" title="Link to this heading">#</a></h2>
<p>When you have a Dockerfile, you can build it to a docker image with the <code class="docutils literal notranslate"><span class="pre">build</span></code> command using the following syntax:
<code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">build</span> <span class="pre">--tag</span> <span class="pre">&lt;my-image-name:my-optional-image-tag&gt;</span> <span class="pre">&lt;my-location-path&gt;</span></code>, where <code class="docutils literal notranslate"><span class="pre">--tag</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">-t</span></code>, <code class="docutils literal notranslate"><span class="pre">-f</span></code> specifies the Dockerfile, and last thing is <code class="docutils literal notranslate"><span class="pre">&lt;my-location-path&gt;</span></code> that can be referenced with <code class="docutils literal notranslate"><span class="pre">.</span></code></p>
<p>Let’s build your Dockerfile to an image:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>align_count<span class="w"> </span>-f<span class="w"> </span>docker_file/Dockerfile<span class="w"> </span>.
</pre></div>
</div>
</section>
<section id="running-a-container-in-interactive-mode">
<h2>Running a container in interactive mode<a class="headerlink" href="#running-a-container-in-interactive-mode" title="Link to this heading">#</a></h2>
<p>While we would rather recommend using <em>virtual environments</em> for running specific environments interactively, it can be handy to be familiar with docker’s ability to run a container in interactive mode. This is just useful to check if the expected software is present within a container, but we do not recommend to change anything in the container, instead do it in the Dockerfile.</p>
<p>This is done by adding the two command line inputs to the <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">run</span></code> command: <code class="docutils literal notranslate"><span class="pre">--interactive</span></code> and <code class="docutils literal notranslate"><span class="pre">--tty</span></code>,  which have the equivalents <code class="docutils literal notranslate"><span class="pre">-i</span></code> and <code class="docutils literal notranslate"><span class="pre">-t</span></code>.</p>
<p>Remember you can always run the following to find out what the parameters used in <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">run</span></code> are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">run</span> <span class="o">--</span><span class="n">help</span>
</pre></div>
</div>
<p>TThe interactive mode can be run with the following syntax: <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">run</span> <span class="pre">-it</span> <span class="pre">&lt;container-name&gt;</span> <span class="pre">&lt;command&gt;</span></code></p>
<p>We will launch the BASH shell (<code class="docutils literal notranslate"><span class="pre">bash</span></code>) in the <code class="docutils literal notranslate"><span class="pre">align_count</span></code> image:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>align_count<span class="w"> </span>bash
</pre></div>
</div>
<p>Then you can check what is in there <code class="docutils literal notranslate"><span class="pre">ls</span> <span class="pre">-la</span></code> or in which directory are we <code class="docutils literal notranslate"><span class="pre">pwd</span></code>. Which folder can you see?</p>
<p>After looking around lets exit the bash with <code class="docutils literal notranslate"><span class="pre">exit</span></code>.</p>
<p>Check which software versions you included in your Docker image:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>run<span class="w"> </span>align_count<span class="w"> </span>bowtie2<span class="w"> </span>--version
docker<span class="w"> </span>run<span class="w"> </span>align_count<span class="w"> </span>featureCounts<span class="w"> </span>-v
</pre></div>
</div>
<p>We know that our images are locally available. We also want to check if our containers are still existing.</p>
<p>To do this try: <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">ps</span> <span class="pre">-a</span></code></p>
<p>When we do this we can see that they are still existing. There is no reason for this as these containers are supposed to just do one job based on the docker image.</p>
<p>We can keep our space tidy by adding <code class="docutils literal notranslate"><span class="pre">--rm</span></code> to the run command to make sure the container is wiped after usage.</p>
</section>
<section id="file-system-mounts">
<h2>File system mounts<a class="headerlink" href="#file-system-mounts" title="Link to this heading">#</a></h2>
<p>Containers are isolated and run in a completely separate file system and it cannot access the hosting file system by default.</p>
<p>We can use the <code class="docutils literal notranslate"><span class="pre">--volume</span> <span class="pre">&lt;host-directory&gt;:&lt;container-directory&gt;</span></code> syntax to make a file or a folder available inside our container. <code class="docutils literal notranslate"><span class="pre">-v</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">--volume</span></code>. Its argument consists of two fields separated by a colon (<code class="docutils literal notranslate"><span class="pre">:</span></code>):</p>
<ul class="simple">
<li><p>Host source directory path</p></li>
<li><p>Container target directory path</p></li>
</ul>
<p>In Docker, there is no fixed hard limit on how many -v (volume mounts) you can attach to a container.</p>
</section>
<section id="running-the-container-mounting-the-data">
<h2>Running the container mounting the data<a class="headerlink" href="#running-the-container-mounting-the-data" title="Link to this heading">#</a></h2>
<p>Finally we are going to build our command line to run our script to align and count inside the Docker container.</p>
<p>We will now make two mounted volumes, a read-only for data (ro), and a writable one for results</p>
<p>Mount paths must be absolute on the container side.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span>-v<span class="w"> </span>./data/:/app/data:ro<span class="w"> </span>-v<span class="w"> </span>./results/:/app/results<span class="w"> </span>align_count<span class="w"> </span>./scripts/align_and_count_prok.sh
</pre></div>
</div>
</section>
<section id="results-files-and-interpretion">
<h2>Results files and interpretion<a class="headerlink" href="#results-files-and-interpretion" title="Link to this heading">#</a></h2>
<p>Results have been copied back from the container to my local <code class="docutils literal notranslate"><span class="pre">results</span></code> folder (host). Let’s have a look.</p>
<p>In total, four output files are generated:</p>
<ul class="simple">
<li><p>Running <code class="docutils literal notranslate"><span class="pre">bowtie2</span></code>/<code class="docutils literal notranslate"><span class="pre">samtools</span></code> generates the sorted alignment file <code class="docutils literal notranslate"><span class="pre">aligned_sorted.bam</span></code> and the bam alignment index <code class="docutils literal notranslate"><span class="pre">aligned_sorted.bam.bai</span></code> (this index is used to accelerate read counting by featureCounts).</p></li>
<li><p>Running <code class="docutils literal notranslate"><span class="pre">featureCounts</span></code>generates the <code class="docutils literal notranslate"><span class="pre">gene_counts.txt</span></code> which holds unnormalised read count data per gene along with additional information like gene length, strand etc.</p>
<ul>
<li><p>Out of 4305 genes, 2720 genes have a read count of at least 1; the remaining genes have zero counts.</p></li>
</ul>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">gene_counts.txt.summary</span></code>file details count statistics.</p>
<ul>
<li><p>It shows that 39913 reads were assigned a genomic feature (gene) and counted.</p></li>
<li><p>Reads that could not be assigned a genomic feature amounted to 3830 and 1840 reads were ambigious (aligned to more than one genomic feature).</p></li>
</ul>
</li>
</ul>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="HandsOn.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Docker Hands-on training</p>
      </div>
    </a>
    <a class="right-next"
       href="align_and_count_shell_script.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Shell script used to align and count reads</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#initial-considerations">Initial considerations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-biological-context-and-script-to-run-in-a-docker-container">Data, biological context and script to run in a Docker container</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#running-a-container">Running a container</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pulling-a-container">Pulling a container</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#writing-our-dockerfile">Writing our Dockerfile</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#building-an-image-from-ther-dockerfile">Building an image from ther Dockerfile</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#running-a-container-in-interactive-mode">Running a container in interactive mode</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#file-system-mounts">File system mounts</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#running-the-container-mounting-the-data">Running the container mounting the data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#results-files-and-interpretion">Results files and interpretion</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Albert Palleja
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2025, DTU Biosustain, Informatics Platform, DSP.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>