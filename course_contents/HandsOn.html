
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Docker Hands-on training &#8212; Data Club Feb 2025: Docker Introduction  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'course_contents/HandsOn';</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Docker Hands-on training (26-11-2025)" href="HandsOn_20251126.html" />
    <link rel="prev" title="Docker Introduction" href="DockerIntro.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
  
    <p class="title logo__title">Data Club Feb 2025: Docker Introduction  documentation</p>
  
</a></div>
        <div class="sidebar-primary-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/biosustain/dsp_docker_training" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../about.html">About</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Course Information</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../course_information/Instructions.html">Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../course_information/Location.html">Location</a></li>
<li class="toctree-l1"><a class="reference internal" href="../course_information/Timing.html">Agenda</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Course contents</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="DockerIntro.html">Docker Introduction</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Docker Hands-on training</a></li>
<li class="toctree-l1"><a class="reference internal" href="HandsOn_20251126.html">Docker Hands-on training (26-11-2025)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../resources.html">Resources</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">


<a href="https://github.com/biosustain/dsp_docker_training" target="_blank"
   class="btn btn-sm btn-source-repository-button"
   title="Source repository"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/course_contents/HandsOn.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Docker Hands-on training</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#running-a-container">Running a container</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pulling-a-container">Pulling a container</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#running-an-container-in-interactive-mode">Running an container in interactive mode</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#writing-your-first-dockerfile">Writing your first Dockerfile</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-additional-software-to-the-image">Adding additional software to the image</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#file-system-mounts">File system mounts</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upload-the-container-in-the-docker-hub-optional">Upload the container in the Docker Hub (optional)</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="docker-hands-on-training">
<h1>Docker Hands-on training<a class="headerlink" href="#docker-hands-on-training" title="Link to this heading">#</a></h1>
<p>Inspired on a part of Nextflow training: <a class="reference external" href="https://training.nextflow.io/basic_training/containers/" rel="noreferrer" target="_blank">https://training.nextflow.io/basic_training/containers/</a></p>
<p>In this course, we strongly recommend you to work in Github Codespaces to avoid any system incompatibility. You can open directly a GitHub codespace for this specific repository here: <a class="reference external" href="https://codespaces.new/biosustain/dsp_docker_training" rel="noreferrer" target="_blank"><img alt="Open in GitHub Codespaces" src="https://github.com/codespaces/badge.svg" /></a></p>
<section id="running-a-container">
<h2>Running a container<a class="headerlink" href="#running-a-container" title="Link to this heading">#</a></h2>
<p>Once the codespace has been set up and docker daemon is running you can run containers, we will start with the <code class="docutils literal notranslate"><span class="pre">hello-world</span></code> container, which is hosted on <a class="reference external" href="https://hub.docker.com/" rel="noreferrer" target="_blank">Docker Hub</a>.</p>
<p>In your command line, run the publicly available <code class="docutils literal notranslate"><span class="pre">hello-world</span></code> container:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">run</span> <span class="n">hello</span><span class="o">-</span><span class="n">world</span>
</pre></div>
</div>
<p>We usually run that to check that our installation is working correctly. If you read <code class="docutils literal notranslate"><span class="pre">'Hello</span> <span class="pre">from</span> <span class="pre">Docker!'</span></code> everything is fine for now.</p>
<p>Please read the information given. Docker first tried to check if we had the container locally, as we did not, the online container repositories were checked. As the container was found, it was donwloaded, and run.</p>
</section>
<section id="pulling-a-container">
<h2>Pulling a container<a class="headerlink" href="#pulling-a-container" title="Link to this heading">#</a></h2>
<p>Pull the publicly available <code class="docutils literal notranslate"><span class="pre">debian:bookworm-slim</span></code> container and verify it has been downloaded:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">pull</span> <span class="n">debian</span><span class="p">:</span><span class="n">bookworm</span><span class="o">-</span><span class="n">slim</span>
</pre></div>
</div>
<p>To check which containers you have pulled, you can use <code class="docutils literal notranslate"><span class="pre">images</span></code> command with the following syntax:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">images</span>
</pre></div>
</div>
</section>
<section id="running-an-container-in-interactive-mode">
<h2>Running an container in interactive mode<a class="headerlink" href="#running-an-container-in-interactive-mode" title="Link to this heading">#</a></h2>
<p>While we would rather reccomend using <em>virtual environments</em> for running speciffic environments interactively, it can be handy to be familiar with docker’s ability to run a container in interactive mode. This is just useful to check if the expected software is present within a container, but we do not recommend to change anything in the container, instead do it in the Dockerfile.</p>
<p>This is done by adding the two command line inputs to the <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">run</span></code> command: <code class="docutils literal notranslate"><span class="pre">--interactive</span></code> and <code class="docutils literal notranslate"><span class="pre">--tty</span></code>,  which have the equivalents <code class="docutils literal notranslate"><span class="pre">-i</span></code> and <code class="docutils literal notranslate"><span class="pre">-t</span></code>.</p>
<p>They can thus be run with the following syntax: <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">run</span> <span class="pre">-it</span> <span class="pre">&lt;container-name&gt;</span> <span class="pre">&lt;command&gt;</span></code></p>
<p>We will launch the BASH shell (<code class="docutils literal notranslate"><span class="pre">bash</span></code>) in the publicly available <code class="docutils literal notranslate"><span class="pre">debian:bookworm-slim</span></code> container:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">run</span> <span class="o">-</span><span class="n">it</span> <span class="n">debian</span><span class="p">:</span><span class="n">bookworm</span><span class="o">-</span><span class="n">slim</span> <span class="n">bash</span>
</pre></div>
</div>
<p>You can use the usual commands to navigate the file system, for example <code class="docutils literal notranslate"><span class="pre">ls</span></code>. And exit the container with <code class="docutils literal notranslate"><span class="pre">exit</span></code>.</p>
</section>
<section id="writing-your-first-dockerfile">
<h2>Writing your first Dockerfile<a class="headerlink" href="#writing-your-first-dockerfile" title="Link to this heading">#</a></h2>
<p>Docker images are created from a textfile called <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code>.</p>
<p>This text file contains list of commands to assemble and configure the image with the software required.</p>
<p>A dockerfile can use an existing image, and build on top of it.</p>
<p>For the most fundamental dockerfile, we will learn the keywords: <code class="docutils literal notranslate"><span class="pre">FROM</span></code>, <code class="docutils literal notranslate"><span class="pre">LABEL</span></code>, <code class="docutils literal notranslate"><span class="pre">RUN</span></code>, and <code class="docutils literal notranslate"><span class="pre">ENV</span></code></p>
<p>Let’s make a dockerfile based on <code class="docutils literal notranslate"><span class="pre">debian:bookworm-slim</span></code>, with both <code class="docutils literal notranslate"><span class="pre">curl</span></code> and <code class="docutils literal notranslate"><span class="pre">cowsay</span></code> added. <code class="docutils literal notranslate"><span class="pre">code</span> <span class="pre">Dockerfile</span></code> opens a new file called Dockerfile in out editor, and you can copy the followin content and save it:</p>
<p>Content of the file <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code>:</p>
<div class="highlight-docker notranslate"><div class="highlight"><pre><span></span><span class="k">FROM</span><span class="w"> </span><span class="s">debian:bookworm-slim</span>

<span class="k">LABEL</span><span class="w"> </span>image.author.name<span class="o">=</span><span class="s2">&quot;Your Name Here&quot;</span>
<span class="k">LABEL</span><span class="w"> </span>image.author.email<span class="o">=</span><span class="s2">&quot;your@email.here&quot;</span>

<span class="k">RUN</span><span class="w"> </span>apt-get<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>curl<span class="w"> </span>cowsay

<span class="k">ENV</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:/usr/games/
</pre></div>
</div>
<p><em>here the cowsay program is stored in games and we must add that directory to our PATH for the terminal to be able to find it.</em></p>
<p>When you have a Dockerfile, you can build it to a docker image with the <code class="docutils literal notranslate"><span class="pre">build</span></code> command using the following syntax:
<code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">build</span> <span class="pre">--tag</span> <span class="pre">&lt;my-image-name:my-optional-image-tag&gt;</span> <span class="pre">&lt;my-location-path&gt;</span></code>, where <code class="docutils literal notranslate"><span class="pre">--tag</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">-t</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;my-location-path&gt;</span></code> can be referenced with <code class="docutils literal notranslate"><span class="pre">.</span></code></p>
<p>Let’s build your docker file to an image:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">build</span> <span class="o">-</span><span class="n">t</span> <span class="n">demo1</span> <span class="o">.</span>
</pre></div>
</div>
<p>Try the new container and say “Hej DTU”:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">run</span> <span class="n">demo1</span> <span class="n">cowsay</span> <span class="s2">&quot;Hej DTU&quot;</span>
</pre></div>
</div>
<p>Lets make our image for cowsay only by setting an ENTRYPOINT. Add the following line to the Dockerfile:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ENTRYPOINT</span> <span class="p">[</span> <span class="s2">&quot;cowsay&quot;</span> <span class="p">]</span>
</pre></div>
</div>
<p>And run <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">build</span> <span class="pre">-t</span> <span class="pre">demo1</span> <span class="pre">.</span></code> again. Notice that now we run it without specifying which program to use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">run</span> <span class="n">demo1</span> <span class="s2">&quot;Hej DTU&quot;</span>
</pre></div>
</div>
</section>
<section id="adding-additional-software-to-the-image">
<h2>Adding additional software to the image<a class="headerlink" href="#adding-additional-software-to-the-image" title="Link to this heading">#</a></h2>
<p>Say you have identified a container that you want to run with your script, but a key piece of software is missing.</p>
<p>We can modify the container by adding some lines of code to the Dockerfile, which is used to generate the docker image. Remember that this is the image that we used to spin up the docker container that we will use.</p>
<p>Not all tools needed can be installed with <code class="docutils literal notranslate"><span class="pre">apt-get</span></code> and we may need to download from a particular URL, luckily we know how to make an image with curl installed.</p>
<p>We can add the following lines in the bottom of our dockerfile to download and extract the tool <code class="docutils literal notranslate"><span class="pre">salmon</span></code>. Salmon is a tool for quantifying molecules known as transcripts through a type of data called RNA-seq data.</p>
<p>Build an image with <code class="docutils literal notranslate"><span class="pre">salmon</span></code> installed. Do this by updating your <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code> accordingly:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">RUN</span> <span class="n">curl</span> <span class="o">-</span><span class="n">sSL</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">COMBINE</span><span class="o">-</span><span class="n">lab</span><span class="o">/</span><span class="n">salmon</span><span class="o">/</span><span class="n">releases</span><span class="o">/</span><span class="n">download</span><span class="o">/</span><span class="n">v1</span><span class="mf">.5.2</span><span class="o">/</span><span class="n">salmon</span><span class="o">-</span><span class="mf">1.5.2</span><span class="n">_linux_x86_64</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span> <span class="o">|</span> <span class="n">tar</span> <span class="n">xz</span> \
<span class="o">&amp;&amp;</span> <span class="n">mv</span> <span class="o">/</span><span class="n">salmon</span><span class="o">-*/</span><span class="nb">bin</span><span class="o">/*</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span> \
<span class="o">&amp;&amp;</span> <span class="n">mv</span> <span class="o">/</span><span class="n">salmon</span><span class="o">-*/</span><span class="n">lib</span><span class="o">/*</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span>
</pre></div>
</div>
<p>Update the <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code> to also have the lines from above, remove the line with <code class="docutils literal notranslate"><span class="pre">ENTRYPOINT</span></code></p>
<p>Build the image with the same command as before.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">build</span> <span class="o">-</span><span class="n">t</span> <span class="n">demo2</span> <span class="o">.</span>
</pre></div>
</div>
<p>Check with images that you have got a new one:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">images</span>
</pre></div>
</div>
<p>If you used the same name and tag you should notice that even if names are the same, images will have different image ID.</p>
<p>Verifying that salmon is correctly installed can be done with the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">run</span> <span class="n">demo2</span> <span class="n">salmon</span> <span class="o">--</span><span class="n">version</span>
</pre></div>
</div>
<p>In case this fails, please try this alternative:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">run</span> <span class="n">nextflow</span><span class="o">/</span><span class="n">rnaseq</span><span class="o">-</span><span class="n">nf</span> <span class="n">salmon</span> <span class="o">--</span><span class="n">version</span>
</pre></div>
</div>
<p>We know that our images are locally available. We also want to check if our containers are still existing.</p>
<p>To do this try: <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">ps</span> <span class="pre">-a</span></code></p>
<p>When we do this we can see that they are still existing. There is no reason for this as these containers are supposed to just do one job based on the docker image.</p>
<p>We can keep our space tidy by adding <code class="docutils literal notranslate"><span class="pre">--rm</span></code> to the run command to make sure the container is wiped after usage.</p>
</section>
<section id="file-system-mounts">
<h2>File system mounts<a class="headerlink" href="#file-system-mounts" title="Link to this heading">#</a></h2>
<p>Containers run in a completely separate file system and it cannot access the hosting file system by default.</p>
<p>We can use the <code class="docutils literal notranslate"><span class="pre">--volume</span> <span class="pre">&lt;host-directrory&gt;:&lt;container-directory&gt;</span></code> syntax to make a file or a folder available inside our container</p>
<p>Without linking directories like this, we dont have access to outside files, inside the container. I.e. running the following command that is attempting to generate a genome index using the Salmon tool will fail because Salmon cannot access the input file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>docker run --rm my-image \
    salmon index -t $PWD/course_content/data/ggal/transcriptome.fa -i transcript-index
</pre></div>
</div>
<p>To mount a filesystem within a Docker container, you can use the <code class="docutils literal notranslate"><span class="pre">--volume</span></code> command-line option when running the container. Its argument consists of two fields separated by a colon (<code class="docutils literal notranslate"><span class="pre">:</span></code>):</p>
<p>Host source directory path
Container target directory path
For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">run</span> <span class="o">--</span><span class="n">rm</span> <span class="o">--</span><span class="n">volume</span> <span class="o">./</span><span class="n">course_contents</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">ggal</span><span class="o">/</span><span class="n">transcriptome</span><span class="o">.</span><span class="n">fa</span><span class="p">:</span><span class="o">/</span><span class="n">transcriptome</span><span class="o">.</span><span class="n">fa</span> <span class="o">&lt;</span><span class="n">image</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span> <span class="n">head</span> <span class="o">/</span><span class="n">transcriptome</span><span class="o">.</span><span class="n">fa</span>
</pre></div>
</div>
<p>to use current folder like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>docker run --rm --volume $PWD:$PWD --workdir $PWD demo2 salmon index -t $PWD/course_contents/data/ggal/transcriptome.fa -i transcript-index
</pre></div>
</div>
<p>To keep everything more tidy, we can set a folder we want to mount as an environmental variable, called <code class="docutils literal notranslate"><span class="pre">DATA</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>DATA=/workspaces/dsp_docker_training/course_contents/data/
docker run --rm --volume $DATA:$DATA --workdir $DATA demo2 salmon index -t $DATA/ggal/transcriptome.fa -i transcript-index
</pre></div>
</div>
<p>You can check the content of the transcript-index folder by entering the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ls</span> <span class="o">-</span><span class="n">la</span> <span class="o">/</span><span class="n">workspaces</span><span class="o">/</span><span class="n">dsp_docker_training</span><span class="o">/</span><span class="n">course_contents</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">transcript</span><span class="o">-</span><span class="n">index</span>
</pre></div>
</div>
<p>Note that the permissions for files created by the Docker execution is root.</p>
<p>We will now make two mounted volumes, a read-only for input, and a writable for output, <code class="docutils literal notranslate"><span class="pre">-v</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">--volume</span></code>.
We can also add the entrypoint, and specify input and output parameters to match with what our command in salmon expects:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">run</span> <span class="o">--</span><span class="n">rm</span> <span class="o">-</span><span class="n">v</span> <span class="o">./</span><span class="n">course_contents</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">ggal</span><span class="o">/</span><span class="n">transcriptome</span><span class="o">.</span><span class="n">fa</span><span class="p">:</span><span class="o">/</span><span class="n">transcriptome</span><span class="o">.</span><span class="n">fa</span><span class="p">:</span><span class="n">ro</span> <span class="o">-</span><span class="n">v</span> <span class="o">./</span><span class="n">course_contents</span><span class="o">/</span><span class="n">result</span><span class="o">/</span><span class="p">:</span><span class="o">/</span><span class="n">result</span> <span class="n">demo2</span> <span class="n">salmon</span> <span class="n">index</span> <span class="o">-</span><span class="n">t</span> <span class="o">/</span><span class="n">transcriptome</span><span class="o">.</span><span class="n">fa</span> <span class="o">-</span><span class="n">i</span> <span class="o">/</span><span class="n">result</span><span class="o">/</span><span class="n">transcript</span><span class="o">-</span><span class="n">index</span>
</pre></div>
</div>
</section>
<section id="upload-the-container-in-the-docker-hub-optional">
<h2>Upload the container in the Docker Hub (optional)<a class="headerlink" href="#upload-the-container-in-the-docker-hub-optional" title="Link to this heading">#</a></h2>
<p>While you can follow this guide, it is reccomended that you also look into any instructions there may be where you chose to host your images.</p>
<p>You can also publish your container in the Docker Hub to share it with other people.</p>
<p>Create an account on the https://hub.docker.com website. Then from your shell terminal run the following command, entering the user name and password you specified when registering in the Hub:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">login</span>
</pre></div>
</div>
<p>Rename the image to include your Docker user name account:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">tag</span> <span class="n">my</span><span class="o">-</span><span class="n">image</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;/</span><span class="n">my</span><span class="o">-</span><span class="n">image</span>
</pre></div>
</div>
<p>Finally push it to the Docker Hub:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">push</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;/</span><span class="n">my</span><span class="o">-</span><span class="n">image</span>
</pre></div>
</div>
<p>After that anyone will be able to download it by using the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">pull</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;/</span><span class="n">my</span><span class="o">-</span><span class="n">image</span>
</pre></div>
</div>
<p>Note how after a pull and push operation, Docker prints the container digest number e.g.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Output</span>

<span class="n">Digest</span><span class="p">:</span> <span class="n">sha256</span><span class="p">:</span><span class="n">aeacbd7ea1154f263cda972a96920fb228b2033544c2641476350b9317dab266</span>
<span class="n">Status</span><span class="p">:</span> <span class="n">Downloaded</span> <span class="n">newer</span> <span class="n">image</span> <span class="k">for</span> <span class="n">nextflow</span><span class="o">/</span><span class="n">rnaseq</span><span class="o">-</span><span class="n">nf</span><span class="p">:</span><span class="n">latest</span>
</pre></div>
</div>
<p>This is a unique and immutable identifier that can be used to reference a container image in a univocally manner. For example:</p>
<p><code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">pull</span> <span class="pre">nextflow/rnaseq-nf&#64;sha256:aeacbd7ea1154f263cda972a96920fb228b2033544c2641476350b9317dab266</span></code></p>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="DockerIntro.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Docker Introduction</p>
      </div>
    </a>
    <a class="right-next"
       href="HandsOn_20251126.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Docker Hands-on training (26-11-2025)</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#running-a-container">Running a container</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pulling-a-container">Pulling a container</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#running-an-container-in-interactive-mode">Running an container in interactive mode</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#writing-your-first-dockerfile">Writing your first Dockerfile</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-additional-software-to-the-image">Adding additional software to the image</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#file-system-mounts">File system mounts</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#upload-the-container-in-the-docker-hub-optional">Upload the container in the Docker Hub (optional)</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Albert Palleja
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2025, DTU Biosustain, Informatics Platform, DSP.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>